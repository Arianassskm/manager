document.addEventListener('DOMContentLoaded',function(){const customModal=document.getElementById('customModal');const confirmBtn=document.getElementById('confirmBtn');const dontShowAgainBtn=document.getElementById('dontShowAgainBtn');const shouldShowModal=!localStorage.getItem('dismissCustomModal')&&!getCookie('dismissCustomModal');if(shouldShowModal){customModal.classList.add('custom-modal-open')}confirmBtn.addEventListener('click',function(){customModal.classList.remove('custom-modal-open')});dontShowAgainBtn.addEventListener('click',function(){customModal.classList.remove('custom-modal-open');setCookie('dismissCustomModal','true',getSiteTimeFromDatabase())})});function setCookie(name,value,siteTime){const expires=new Date();expires.setTime(expires.getTime()+(siteTime*1000));document.cookie=name+'='+escape(value)+';expires='+expires.toUTCString()+';path=/'}function getCookie(name){const nameEQ=name+'=';const ca=document.cookie.split(';');for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)===' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length)}return null}function getSiteTimeFromDatabase(){var siteTime=<?php echo $website['site_time'];?>;return siteTime}function calculateTimeDifference(){var specifiedTime='<?php echo nl2br($website['website_time']); ?>';var specifiedDate=new Date(specifiedTime.replace(/-/g,' '));var now=new Date();var difference=now-specifiedDate;var days=Math.floor(difference/(1000*60*60*24));var hours=Math.floor((difference%(1000*60*60*24))/(1000*60*60));var minutes=Math.floor((difference%(1000*60*60))/(1000*60));var seconds=Math.floor((difference%(1000*60))/1000);var result="本站已运行："+days+" 天 "+hours+" 小时 "+minutes+" 分钟 "+seconds+" 秒 ~";document.getElementById('timeDifference').innerHTML=result}window.onload=function(){calculateTimeDifference();setInterval(calculateTimeDifference,1000)};function fetchVisitCount(){fetch('core/visit.php').then(response=>response.text()).then(count=>{document.getElementById('visit-1').textContent='(ﾉ*･ω･)ﾉ您是本站第'+count+'位访客喔(≧∇≦)ﾉ'}).catch(error=>console.error('Error fetching visit count:',error))}fetchVisitCount();